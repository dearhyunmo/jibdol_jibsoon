<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>

<!DOCTYPE html>
<html lang="ko-KR"
	class="html_stretched responsive av-preloader-disabled html_header_top html_logo_left html_main_nav_header html_menu_right html_custom html_header_sticky_disabled html_header_shrinking_disabled html_mobile_menu_tablet html_header_searchicon_disabled html_content_align_center html_header_unstick_top_disabled html_header_stretch_disabled html_minimal_header html_av-overlay-side html_av-overlay-side-classic html_av-submenu-noclone html_entry_id_2 av-no-preview html_text_menu_active">
<meta http-equiv="content-type" content="text/html;charset=UTF-8" />
<head>
<link rel="icon" href="resources/img/favi.png" type="image/png" />
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1" />

<title>JibDol & JibSoon</title>
<script src="resources/js/jquery-2.2.4.min.js"></script>
<script src="resources/js/owl.carousel.js"></script>
<script src="resources/js/validcheck.js"></script>
<script src="resources/js/main.js"></script>
<script src="resources/js/pjax.js"></script>
<script src="resources/js/jquery.pjax.js"></script>
<link rel="stylesheet" type="text/css" href="resources/css/hway.css" />
<script src="resources/js/animation.js"></script>
<link rel="stylesheet" href="resources/css/animation.css" />
<script src="resources/js/jquery.fullPage.js"></script>
<script src="resources/js/TweenMax.min.js"></script>
<script src="resources/js/cursor.js"></script>
<script src="resources/js/highlight.js"></script>
<script src="resources/js/jquery.form.min.js"></script>
<link rel="stylesheet" href="resources/js/owl.carousel.css" />
<style type="text/css">
img.wp-smiley, img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 0.07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" id="contact-form-7-css"
	href="resources/css/style.css" type="text/css" media="all" />
<link rel="stylesheet" id="avia-grid-css" href="resources/css/grid.css"
	type="text/css" media="all" />
<link rel="stylesheet" id="avia-base-css" href="resources/css/base.css"
	type="text/css" media="all" />
<link rel="stylesheet" id="avia-layout-css"
	href="resources/css/layout.css" type="text/css" media="all" />
<link rel="stylesheet" id="avia-scs-css"
	href="resources/css/shortcodes.css" type="text/css" media="all" />
<link rel="stylesheet" id="avia-print-css"
	href="resources/css/print.css" type="text/css" media="print" />
<link rel="stylesheet" id="avia-custom-css"
	href="resources/css/custom.css" type="text/css" media="all" />
<style type="text/css" media="screen">
#top #header_main>.container, #top #header_main>.container .main_menu .av-main-nav>li>a,
	#top #header_main #menu-item-shop .cart_dropdown_link {
	height: 117px;
	line-height: 117px;
}

.html_top_nav_header .av-logo-container {
	height: 117px;
}

.html_header_top.html_header_sticky #top #wrap_all #main {
	padding-top: 115px;
}
</style>
<style type="text/css">
.recentcomments a {
	display: inline !important;
	padding: 0 !important;
	margin: 0 !important;
}
</style>
<style type="text/css">
@font-face {
	font-family: 'entypo-fontello';
	font-weight: normal;
	font-style: normal;
	src: url('resources/fonts/entypo-fontello30f4.eot');
	src: url('resources/fonts/entypo-fontello30f4.eot')
		format('embedded-opentype'),
		url('resources/fonts/entypo-fontello30f4.woff') format('woff'),
		url('resources/fonts/entypo-fontello30f4.ttf') format('truetype'),
		url('resources/fonts/entypo-fontello30f4.svg') format('svg');
}

#top .avia-font-entypo-fontello, body .avia-font-entypo-fontello, html body [data-av_iconfont='entypo-fontello']:before
	{
	font-family: 'entypo-fontello';
}
</style>

</head>
<body id="top"
	class="home page page-id-2 page-template-default stretched helvetica-neue-websave _helvetica_neue"
	itemscope="itemscope" itemtype="https://schema.org/WebPage">
	<%@ include file="/WEB-INF/views/include/header.jsp"%>
	<div id="wrap_all">
		<%@ include file="/WEB-INF/views/include/pc_menu.jsp"%>

		<!-- 각 페이지별 작업 공간 -->

		<div id="main" class="all_colors" data-scroll-offset="0">
			<div id="cap-sec01"
				class="av-layout-grid-container entry-content-wrapper main_color av-flex-cells avia-builder-el-0 el_before_av_layout_row avia-builder-el-first container_wrap fullsize">
				<div
					class="flex_cell no_margin av_one_full avia-builder-el-1 avia-builder-el-no-sibling av-zero-padding"
					style="vertical-align: top; padding: 0">
					<div class="flex_cell_inner">
						<section class="av_textblock_section" itemscope="itemscope"
							itemtype="https://schema.org/CreativeWork">
							<div class="avia_textblock" itemprop="text">
								<p class="sub-title en-txt03">
									<span class="txt-ani">Let's look around</span><br /> <span
										class="color-cc txt-ani">JibDol & JibSoons's Commercial</span>
								</p>
							</div>
						</section>
					</div>
				</div>
			</div>

			<div id="meth-sec07"
				class="av-layout-grid-container entry-content-wrapper main_color av-flex-cells avia-builder-el-7 el_after_av_layout_row el_before_av_layout_row submenu-not-first container_wrap fullsize">
				<div
					class="flex_cell no_margin av_one_map avia-builder-el-10 el_after_av_cell_one_half avia-builder-el-last av-zero-padding"
					style="vertical-align: top; padding: 0">
					<div class="flex_cell_inner searchmap">
						<div id="map" style="width: 100%"></div>
					</div>
				</div>
				<div
					class="flex_cell no_margin av_one_cate avia-builder-el-8 el_before_av_cell_one_half avia-builder-el-first av-zero-padding"
					style="vertical-align: top; padding: 0">
					<div class="flex_cell_inner searchresult">
						<div
							class="avia-image-container av-styling- avia-builder-el-9 avia-builder-el-no-sibling avia-align-center">
							<div class="avia-image-container-inner"
								style="width: 100%; background-color: #d1ffed; height: 500px">
								<ul id="category">
									<li id="MT1" data-order="0"><span class="category_bg mt1"></span>
										대형마트</li>
									<li id="CS2" data-order="1"><span class="category_bg cs2"></span>
										편의점</li>
									<li id="PS3" data-order="2"><span class="category_bg ps3"></span>
										어린이집, 유치원</li>
									<li id="SC4" data-order="3"><span class="category_bg sc4"></span>
										학교</li>
									<li id="PK6" data-order="4"><span class="category_bg pk6"></span>
										주차장</li>
									<li id="OL7" data-order="5"><span class="category_bg ol7"></span>
										주유소, 충전소</li>
									<li id="SW8" data-order="6"><span class="category_bg sw8"></span>
										지하철역</li>
									<li id="BK9" data-order="7"><span class="category_bg bk9"></span>
										은행</li>
									<li id="CT1" data-order="8"><span class="category_bg ct1"></span>
										문화시설</li>
									<li id="PO3" data-order="9"><span class="category_bg po3"></span>
										공공기관</li>
									<li id="AD5" data-order="10"><span class="category_bg ad5"></span>
										숙박</li>
									<li id="FD6" data-order="11"><span class="category_bg fd6"></span>
										음식점</li>
									<li id="CE7" data-order="12"><span class="category_bg ce7"></span>
										카페</li>
									<li id="HP8" data-order="13"><span class="category_bg hp8"></span>
										병원</li>
									<li id="PM9" data-order="14"><span class="category_bg pm9"></span>
										약국</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
				<script type="text/javascript"
					src="//dapi.kakao.com/v2/maps/sdk.js?appkey=53a87b945854a8503a27ecf8ff801da0&libraries=services"></script>

				<script>
// 마커를 클릭했을 때 해당 장소의 상세정보를 보여줄 커스텀오버레이입니다
var placeOverlay = new kakao.maps.CustomOverlay({zIndex:1}), 
    contentNode = document.createElement('div'), // 커스텀 오버레이의 컨텐츠 엘리먼트 입니다 
    markers = [], // 마커를 담을 배열입니다
    currCategory = ''; // 현재 선택된 카테고리를 가지고 있을 변수입니다
 
var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
    mapOption = {
        center: new kakao.maps.LatLng(37.566826, 126.9786567), // 지도의 중심좌표
        level: 5 // 지도의 확대 레벨
    };  

// 지도를 생성합니다    
var map = new kakao.maps.Map(mapContainer, mapOption); 

// 장소 검색 객체를 생성합니다
var ps = new kakao.maps.services.Places(map); 

// 지도에 idle 이벤트를 등록합니다
kakao.maps.event.addListener(map, 'idle', searchPlaces);

// 커스텀 오버레이의 컨텐츠 노드에 css class를 추가합니다 
contentNode.className = 'placeinfo_wrap';

// 커스텀 오버레이의 컨텐츠 노드에 mousedown, touchstart 이벤트가 발생했을때
// 지도 객체에 이벤트가 전달되지 않도록 이벤트 핸들러로 kakao.maps.event.preventMap 메소드를 등록합니다 
addEventHandle(contentNode, 'mousedown', kakao.maps.event.preventMap);
addEventHandle(contentNode, 'touchstart', kakao.maps.event.preventMap);

// 커스텀 오버레이 컨텐츠를 설정합니다
placeOverlay.setContent(contentNode);  

// 각 카테고리에 클릭 이벤트를 등록합니다
addCategoryClickEvent();

// 엘리먼트에 이벤트 핸들러를 등록하는 함수입니다
function addEventHandle(target, type, callback) {
    if (target.addEventListener) {
        target.addEventListener(type, callback);
    } else {
        target.attachEvent('on' + type, callback);
    }
}

// 카테고리 검색을 요청하는 함수입니다
function searchPlaces() {
    if (!currCategory) {
        return;
    }
    
    // 커스텀 오버레이를 숨깁니다 
    placeOverlay.setMap(null);

    // 지도에 표시되고 있는 마커를 제거합니다
    removeMarker();
    
    ps.categorySearch(currCategory, placesSearchCB, {useMapBounds:true}); 
}

// 장소검색이 완료됐을 때 호출되는 콜백함수 입니다
function placesSearchCB(data, status, pagination) {
    if (status === kakao.maps.services.Status.OK) {

        // 정상적으로 검색이 완료됐으면 지도에 마커를 표출합니다
        displayPlaces(data);
    } else if (status === kakao.maps.services.Status.ZERO_RESULT) {
        // 검색결과가 없는경우 해야할 처리가 있다면 이곳에 작성해 주세요

    } else if (status === kakao.maps.services.Status.ERROR) {
        // 에러로 인해 검색결과가 나오지 않은 경우 해야할 처리가 있다면 이곳에 작성해 주세요
        
    }
}

// 지도에 마커를 표출하는 함수입니다
function displayPlaces(places) {

    // 몇번째 카테고리가 선택되어 있는지 얻어옵니다
    // 이 순서는 스프라이트 이미지에서의 위치를 계산하는데 사용됩니다
    var order = document.getElementById(currCategory).getAttribute('data-order');

    

    for ( var i=0; i<places.length; i++ ) {

            // 마커를 생성하고 지도에 표시합니다
            var marker = addMarker(new kakao.maps.LatLng(places[i].y, places[i].x), order);

            // 마커와 검색결과 항목을 클릭 했을 때
            // 장소정보를 표출하도록 클릭 이벤트를 등록합니다
            (function(marker, place) {
                kakao.maps.event.addListener(marker, 'click', function() {
                    displayPlaceInfo(place);
                });
            })(marker, places[i]);
    }
}

// 마커를 생성하고 지도 위에 마커를 표시하는 함수입니다
function addMarker(position, order) {
	var imageSrc = 'resources/img/icon/search.png', // 마커 이미지 url, 스프라이트 이미지를 씁니다
    imageSize = new kakao.maps.Size(40, 40),  // 마커 이미지의 크기
//    imgOptions =  {
 //       spriteSize : new kakao.maps.Size(72, 208), // 스프라이트 이미지의 크기
 //       spriteOrigin : new kakao.maps.Point(46, (order*36)), // 스프라이트 이미지 중 사용할 영역의 좌상단 좌표
 //       offset: new kakao.maps.Point(11, 28) // 마커 좌표에 일치시킬 이미지 내에서의 좌표
 //   },
    markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize),
        marker = new kakao.maps.Marker({
        position: position, // 마커의 위치
        image: markerImage 
    });

    marker.setMap(map); // 지도 위에 마커를 표출합니다
    markers.push(marker);  // 배열에 생성된 마커를 추가합니다

    return marker;
}

// 지도 위에 표시되고 있는 마커를 모두 제거합니다
function removeMarker() {
    for ( var i = 0; i < markers.length; i++ ) {
        markers[i].setMap(null);
    }   
    markers = [];
}

// 클릭한 마커에 대한 장소 상세정보를 커스텀 오버레이로 표시하는 함수입니다
function displayPlaceInfo (place) {
    var content = '<div class="placeinfo">' +
                    '   <a class="title" href="' + place.place_url + '" target="_blank" title="' + place.place_name + '">' + place.place_name + '</a>';   

    if (place.road_address_name) {
        content += '    <span title="' + place.road_address_name + '">' + place.road_address_name + '</span>' +
                    '  <span class="jibun" title="' + place.address_name + '">(지번 : ' + place.address_name + ')</span>';
    }  else {
        content += '    <span title="' + place.address_name + '">' + place.address_name + '</span>';
    }                
   
    content += '    <span class="tel">' + place.phone + '</span>' + 
                '</div>' + 
                '<div class="after"></div>';

    contentNode.innerHTML = content;
    placeOverlay.setPosition(new kakao.maps.LatLng(place.y, place.x));
    placeOverlay.setMap(map);  
}


// 각 카테고리에 클릭 이벤트를 등록합니다
function addCategoryClickEvent() {
    var category = document.getElementById('category'),
        children = category.children;

    for (var i=0; i<children.length; i++) {
        children[i].onclick = onClickCategory;
    }
}

// 카테고리를 클릭했을 때 호출되는 함수입니다
function onClickCategory() {
    var id = this.id,
        className = this.className;

    placeOverlay.setMap(null);

    if (className === 'on') {
        currCategory = '';
        changeCategoryClass();
        removeMarker();
    } else {
        currCategory = id;
        changeCategoryClass(this);
        searchPlaces();
    }
}

// 클릭된 카테고리에만 클릭된 스타일을 적용하는 함수입니다
function changeCategoryClass(el) {
    var category = document.getElementById('category'),
        children = category.children,
        i;

    for ( i=0; i<children.length; i++ ) {
        children[i].className = '';
    }

    if (el) {
        el.className = 'on';
    } 
} 
</script>


			</div>


			<!-- 각 페이지별 작업 공간 -->

			<%@ include file="/WEB-INF/views/include/footer.jsp"%>
		</div>
	</div>


</body>

</html>