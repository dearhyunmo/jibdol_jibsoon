<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<c:set var="root" value="${pageContext.request.contextPath}"/>
<!DOCTYPE html>
<html
  lang="ko-KR"
  class="html_stretched responsive av-preloader-disabled html_header_top html_logo_left html_main_nav_header html_menu_right html_custom html_header_sticky_disabled html_header_shrinking_disabled html_mobile_menu_tablet html_header_searchicon_disabled html_content_align_center html_header_unstick_top_disabled html_header_stretch_disabled html_minimal_header html_av-overlay-side html_av-overlay-side-classic html_av-submenu-noclone html_entry_id_2 av-no-preview html_text_menu_active"
>
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
<head>
	<link rel="icon" href="resources/img/favi.png" type="image/png" />
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    
<title>JibDol & JibSoon</title>
<script src="resources/js/jquery-2.2.4.min.js"></script>
    <script src="resources/js/owl.carousel.js"></script>
    <script src="resources/js/validcheck.js"></script>
    <script src="resources/js/main.js"></script>
    <script src="resources/js/pjax.js"></script>
    <script src="resources/js/jquery.pjax.js"></script>
    <link rel="stylesheet" type="text/css" href="resources/css/hway.css" />
    <script src="resources/js/animation.js"></script>
    <link rel="stylesheet" href="resources/css/animation.css" />
    <script src="resources/js/jquery.fullPage.js"></script>
    <script src="resources/js/TweenMax.min.js"></script>
    <script src="resources/js/cursor.js"></script>
    <script src="resources/js/highlight.js"></script>
    <script src="resources/js/jquery.form.min.js"></script>
    <link rel="stylesheet" href="resources/js/owl.carousel.css" />
    <style type="text/css">
      img.wp-smiley,
      img.emoji {
        display: inline !important;
        border: none !important;
        box-shadow: none !important;
        height: 1em !important;
        width: 1em !important;
        margin: 0 0.07em !important;
        vertical-align: -0.1em !important;
        background: none !important;
        padding: 0 !important;
      }
    </style>
    <link
      rel="stylesheet"
      id="contact-form-7-css"
      href="resources/css/style.css"
      type="text/css"
      media="all"
    />
    <link rel="stylesheet" id="avia-grid-css" href="resources/css/grid.css" type="text/css" media="all" />
    <link rel="stylesheet" id="avia-base-css" href="resources/css/base.css" type="text/css" media="all" />
    <link rel="stylesheet" id="avia-layout-css" href="resources/css/layout.css" type="text/css" media="all" />
    <link
      rel="stylesheet"
      id="avia-scs-css"
      href="resources/css/shortcodes.css"
      type="text/css"
      media="all"
    />
    <link rel="stylesheet" id="avia-print-css" href="resources/css/print.css" type="text/css" media="print" />
    <link rel="stylesheet" id="avia-custom-css" href="resources/css/custom.css" type="text/css" media="all" />
    <style type="text/css" media="screen">
      #top #header_main > .container,
      #top #header_main > .container .main_menu .av-main-nav > li > a,
      #top #header_main #menu-item-shop .cart_dropdown_link {
        height: 117px;
        line-height: 117px;
      }
      .html_top_nav_header .av-logo-container {
        height: 117px;
      }
      .html_header_top.html_header_sticky #top #wrap_all #main {
        padding-top: 115px;
      }
    </style>
    <style type="text/css">
      .recentcomments a {
        display: inline !important;
        padding: 0 !important;
        margin: 0 !important;
      }
    </style>
    <style type="text/css">
      @font-face {
        font-family: 'entypo-fontello';
        font-weight: normal;
        font-style: normal;
        src: url('resources/fonts/entypo-fontello30f4.eot');
        src: url('resources/fonts/entypo-fontello30f4.eot') format('embedded-opentype'),
          url('resources/fonts/entypo-fontello30f4.woff') format('woff'),
          url('resources/fonts/entypo-fontello30f4.ttf') format('truetype'),
          url('resources/fonts/entypo-fontello30f4.svg') format('svg');
      }
      #top .avia-font-entypo-fontello,
      body .avia-font-entypo-fontello,
      html body [data-av_iconfont='entypo-fontello']:before {
        font-family: 'entypo-fontello';
      }
    </style>

</head>
 <body
    id="top"
    class="home page page-id-2 page-template-default stretched helvetica-neue-websave _helvetica_neue"
    itemscope="itemscope"
    itemtype="https://schema.org/WebPage"
  >
	<%@ include file="/WEB-INF/views/include/header.jsp"%>
	<div id="wrap_all">
	<%@ include file="/WEB-INF/views/include/pc_menu.jsp"%>
	
	<!-- 각 페이지별 작업 공간 -->
	
	<div id="main" class="all_colors" data-scroll-offset="0">
        <div
          id="cap-sec01"
          class="av-layout-grid-container entry-content-wrapper main_color av-flex-cells avia-builder-el-0 el_before_av_layout_row avia-builder-el-first container_wrap fullsize"
        >
          <div
            class="flex_cell no_margin av_one_full avia-builder-el-1 avia-builder-el-no-sibling av-zero-padding"
            style="vertical-align: top; padding: 0"
          >
            <div class="flex_cell_inner">
              <section
                class="av_textblock_section"
                itemscope="itemscope"
                itemtype="https://schema.org/CreativeWork"
              >
                <div class="avia_textblock" itemprop="text">
                  <p class="sub-title en-txt03">
                    <span class="txt-ani">Let's look up</span><br />
                    <span class="color-cc txt-ani">JibDol & JibSoons's houses</span>
                  </p>
                </div>
              </section>
            </div>
          </div>
        </div>
        <div
          id="search_bar"
          class="av-layout-grid-container entry-content-wrapper main_color av-flex-cells avia-builder-el-0 el_before_av_layout_row avia-builder-el-first container_wrap fullsize"
          style="background-color: #4d4d4d"
        >
          <div
            class="flex_cell no_margin av_one_full avia-builder-el-1 avia-builder-el-no-sibling av-zero-padding"
            style="vertical-align: middle; padding: 0"
          >
            <div class="flex_select_box">
              <section class="av_textblock_section">
                <div class="avia_textblock" >
                    <form action="${root}/houses" method="get">
                  <select id="keyword"  name="searchField">
                  		<option value = "default"> 전체 검색</option>
                  		<option value = "gugun"> 구 군 검색</option>
                  		<option value = "dong"> 동 검색</option>
                  		<option value = "aptName"> 아파트 이름 검색</option>
                  </select>
                  <input class="searchinput"  name="searchText" type="text" placeholder="검색어를 입력하세요." />
                  <button type="submit" class="searchbutton">검 색</button>
                  </form>
                </div>
              </section>
            </div>
          </div>
        </div>

        <div
          id="meth-sec07"
          class="av-layout-grid-container entry-content-wrapper main_color av-flex-cells avia-builder-el-7 el_after_av_layout_row el_before_av_layout_row submenu-not-first container_wrap fullsize"
        >
          <div
            class="flex_cell no_margin av_one_map avia-builder-el-10 el_after_av_cell_one_half avia-builder-el-last av-zero-padding"
            style="vertical-align: top; padding: 0"
          >
            <div class="flex_cell_inner searchmap">
              <div id="map"></div>
              <script
                type="text/javascript"
                src="//dapi.kakao.com/v2/maps/sdk.js?appkey=53a87b945854a8503a27ecf8ff801da0"
              ></script>
              <script>
              var keyword = document.getElementById('keyword');
              console.log
              
              $(document)
               	var json = JSON.parse('${Marker}');

			      //console.log(json[0].AptName);
			      /*var lat = 37.55;
			         var lng = 126.97;*/
			      var container = document.getElementById('map'); //지도를 담을 영역의 DOM 레퍼런스
			      var options = { //지도를 생성할 때 필요한 기본 옵션
			         center : new kakao.maps.LatLng(parseFloat(json[0].lat),
			               parseFloat(json[0].lng)), //지도의 중심좌표.
			         level : 3
			      //지도의 레벨(확대, 축소 정도)
			      };
			      var map = new kakao.maps.Map(container, options); //지도 생성 및 객체 리턴
			
			      for (var i = 0; i < json.length; i++) {
			    	  //console.log(keyword);
			         
			         var markerPosition = new kakao.maps.LatLng(parseFloat(json[i].lat),
			               parseFloat(json[i].lng));
			         
			         var marker = new kakao.maps.Marker({
			            position : markerPosition
			         });
			         
			      // 마커에 표시할 인포윈도우를 생성합니다 
			         var infowindow = new kakao.maps.InfoWindow({
			             content: json[i].AptName // 인포윈도우에 표시할 내용
			         });

			      // 마커에 mouseover 이벤트와 mouseout 이벤트를 등록합니다
			         // 이벤트 리스너로는 클로저를 만들어 등록합니다 
			         // for문에서 클로저를 만들어 주지 않으면 마지막 마커에만 이벤트가 등록됩니다
			         kakao.maps.event.addListener(marker, 'mouseover', makeOverListener(map, marker, infowindow));
			         kakao.maps.event.addListener(marker, 'mouseout', makeOutListener(infowindow));
			         
			         marker.setMap(map);

			      }
			      
			   // 인포윈도우를 표시하는 클로저를 만드는 함수입니다 
			      function makeOverListener(map, marker, infowindow) {
			          return function() {
			              infowindow.open(map, marker);
			          };
			      }

			      // 인포윈도우를 닫는 클로저를 만드는 함수입니다 
			      function makeOutListener(infowindow) {
			          return function() {
			              infowindow.close();
			          };
			      }
			      
                </script>
            </div>
          </div>
          <div
            class="flex_cell no_margin av_one_search avia-builder-el-8 el_before_av_cell_one_half avia-builder-el-first av-zero-padding"
            style="vertical-align: top; padding: 0"
          >
            <div class="flex_cell_inner searchresult">
              <div
                class="avia-image-container av-styling- avia-builder-el-9 avia-builder-el-no-sibling avia-align-center"
              >
                <div
                  class="avia-image-container-inner scroller"
                  style="width: 100%; background-color: #d1ffed; height: 500px"
                >
                <c:if test="${!empty houselists }">
                	<c:forEach var="houselist" items="${houselists }">
		                  <div class="search_result">
		                    <div class="search_txt">
		                      <a href="detailhouse?no=${houselist.no}"><span>${houselist.aptName }</span></a><br />
		                      <span>${houselist.dealAmount } 만원</span><br />
		                    </div>
		                  </div>
                	</c:forEach>
                </c:if>
                  
                </div>
              </div>
            </div>
          </div>
        </div>
	  
	<!-- 각 페이지별 작업 공간 -->
	  
	<%@ include file="/WEB-INF/views/include/footer.jsp"%>
	</div>
	</div>
	

</body>

</html>